# Agent and Developer Documentation

This document provides a comprehensive guide for developers and AI agents working on this project. It covers the project structure, development workflow, and key operational details.

## Project Overview

This project is the frontend for a web-based AI chat application. It features user authentication through Supabase and real-time interaction with an AI through a webhook. The entire application is designed for containerized deployment using Docker and Nginx.

## Repository Structure

The repository root contains all the necessary files for building and running the application.

- **`html/`**: This directory contains the frontend source code.
  - **`src/`**: Contains the JavaScript source modules.
    - `app.js`: The main application entry point.
    - `api.js`: Handles all communication with Supabase and the AI webhook.
    - `auth.js`: Manages user authentication logic.
    - `state.js`: Holds and manages the application's state.
    - `ui.js`: Controls DOM manipulation and user interface updates.
  - **`public/`**: Contains publicly served static assets.
    - `index.html`: The main HTML file.
    - `js/bundle.js`: The bundled JavaScript file generated by the build process.
  - **`package.json`**: Defines Node.js dependencies and build scripts.
- **`Dockerfile`**: Defines the Docker image for building and running the frontend application.
- **`compose.yml`**: The Docker Compose file for orchestrating the services.
- **`build.sh`**: The build script that uses `esbuild` to bundle the JavaScript source code.
- **`nginx.conf`**: The main Nginx configuration file.
- **`default.conf`**: The Nginx server block configuration for the frontend service.
- **`.env.example`**: An example environment file.

## Development Workflow

The development workflow is centered around Docker. There is no local development server script. All development and testing should be done within the Docker environment to ensure consistency with production.

### Getting Started

1.  **Environment Setup**:
    - Copy the `.env.example` file to a new file named `.env`.
    - Populate the `.env` file with your credentials for Supabase and the AI webhook URL.

2.  **Building and Running the Application**:
    - Use Docker Compose to build and run the application in detached mode:
      ```bash
      docker-compose up --build -d
      ```

3.  **Accessing the Application**:
    - The application will be available at `http://localhost:<PORT>`, where `<PORT>` is the port you specified in your `.env` file.

### Making Changes

1.  **Modify Source Code**:
    - Edit the JavaScript files in the `html/src/` directory.

2.  **Rebuild the Application**:
    - After making changes, you need to rebuild the Docker image to see your changes reflected.
      ```bash
      docker-compose up --build -d
      ```

## Information for LLM Assistants

- **Main Source Code**: The primary frontend source code is located in `html/src/`.
- **Dependencies**: Frontend dependencies are managed in `html/package.json`. They are installed as part of the Docker build process defined in the `Dockerfile`.
- **Build Process**: The build process is defined in `build.sh`. It uses `esbuild` to bundle all JavaScript modules from `html/src/` into `html/public/js/bundle.js`. Environment variables are injected during this process. The `ESBUILD_PATH` variable in this script has been corrected to point to the correct location within the `html` directory.
- **UI Elements**: The application has been redesigned with a new "cyber" theme. This includes a new header, a bottom navigation bar, and user/assistant avatars. The new UI elements have placeholder event listeners in `app.js` that log to the console when clicked.
- **API Communication**: The logic for communicating with the AI backend and Supabase is in `html/src/api.js`.
- **Project Goals**: The high-level goals of the project are documented in `project_goals.md`.
- **Tech Stack**: The technologies used in this project are listed in `tech_stack.md`.
- **API Reference**: The API reference for the backend is in `api_reference.md`.
